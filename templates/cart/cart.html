{% extends 'base.html' %}
{% load static %}
{% block content %}
<body>
  <!--================Home Banner Area =================-->
  

  <!--================Cart Area =================-->
  <section class="cart_area padding_top">
    <div class="container">
      <div class="cart_inner">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                
                <th scope="col">Product</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total</th>
                <th scope="col">update</th>
              </tr>
            </thead>
            <tbody>
            {% for cart_item in cart_items %}

              <tr>
                <td>
                  <div class="media">
                    <div class="d-flex">
                      <img src="{{cart_item.product.images.url}}" alt="" width="100" height="100">
 
                    </div>
                    <div class="media-body">
                      
                      <p>{{cart_item.product.product_name}}</p>
                    </div>
                  </div>
                </td>
                <td>
                  <h5>₹{{cart_item.product.price}}</h5>
                  {% comment %} <h5 id="price-{{cart_item.id}}">₹{{cart_item.product.price}}</h5> {% endcomment %}
                </td>
                <td>
                  <div class="product_count">
                    <a href= "{% url 'remove_cart' cart_item.product.id cart_item.id  %}"class="input-number-decrement"> <i class="ti-angle-down"></i></a>
                    {% comment %} <a href="{% url 'remove_cart' cart_item.product.id cart_item.id %}" class="input-number-decrement" data-product-id="{{cart_item.product.id}}" data-cart-item-id="{{cart_item.id}}"> <i class="ti-angle-down"></i></a> {% endcomment %}
                    <input class="input-number" type="text" value="{{cart_item.quantity}}" min="0" max="10">
                    {% comment %} <input class="input-number cart-quantity" type="text" value="{{cart_item.quantity}}" min="0" max="10"> {% endcomment %}

                    <a href = "{% url 'add_cart' cart_item.product.id %}" class="input-number-increment" type="button" id="button-plus"> <i class="ti-angle-up"></i></a>
                    {% comment %} <a href="{% url 'add_cart' cart_item.product.id %}" class="input-number-increment" data-product-id="{{cart_item.product.id}}"> <i class="ti-angle-up"></i></a> {% endcomment %}

                   
                  </div>
                  
                </td>
                <td>
                  <h5>₹{{cart_item.sub_total}}</h5>
                  {% comment %} <h5 id="total-{{cart_item.id}}">₹{{cart_item.sub_total}}</h5> {% endcomment %}
                </td>
                <td class="text-right">
                  <a href="{% url 'remove_cart_item' cart_item.product.id cart_item.id %}" class="btn btn-danger"> Remove</a>
                </td>
              </tr>
            
            {% endfor %}    
                
              
              
              <tr>
                <td></td>
                <td></td>
                <td>
                  <h5>Subtotal</h5><br>
                  <h5>tax</h5><br>
                  <h5>grand total</h5><br>
                </td>
                <td>
                  <h5>₹{{total}}</h5><br>
                  <h5>₹{{tax}}</h5><br>
                  <h5>₹{{grand_total}}</h5><br>
                </td>
                <br>
                
                
                
              </tr>
              
          </table>
          <div class="checkout_btn_inner float-right">
            <a class="btn_1" href="{% url 'store' %}">Continue Shopping</a>
            <a class="btn_1 checkout_btn_1" href="{% url 'checkout' %}">Proceed to checkout</a>
          </div>
        </div>
      </div>
  </section>
  <!--================End Cart Area =================-->
  {% comment %} <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $.ajax({
      url: '{% url "update_cart" %}',
      type: 'POST',
      data: {
        product_id: product_id,
        cart_item_id: cart_item_id,
        quantity: quantity,
        price_id: 'price-' + cart_item_id,
        total_id: 'total-' + cart_item_id,
        csrfmiddlewaretoken: '{{ csrf_token }}'
      },
      success: function(data) {
        // Update the quantity, price, and total on the page
        inputElem.val(quantity);
        $('#price-' + cart_item_id).html('₹' + data.price);
        $('#total-' + cart_item_id).html('₹' + data.total);
        $('#subtotal').html('₹' + data.subtotal);
        $('#tax').html('₹' + data.tax);
        $('#grand-total').html('₹' + data.grand_total);
      }
    });
    
    
    
    </script> {% endcomment %}
</body>
{% endblock %}
</html>
